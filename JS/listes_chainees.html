<!doctype html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>Gestion d'une liste chainée : Version sans classe</title>
    <script>

        let pDebut = null;                     //   pDebut :  pointeur sur le premier élément de la liste

        function Tpersonne(nom, pSuivant) {      //   Tpersonne :  Structure des éléments de la liste
            this.nom = nom;
            this.pSuivant = pSuivant
        }

        /*******************************************************************************************************************/
        /*  Fonction liste() :  permet d'afficher la liste chainée dans une boite de dialogue                              */
        /*******************************************************************************************************************/
        function liste() {
            let s = pDebut;
            let mes = "";

            while (s != null) {
                mes += s.nom + "  -  ";
                s = s.pSuivant;
            }
            document.getElementById("resultat").innerHTML = mes != "" ? mes : " *** Liste vide ***";
        }

        /******************************************************************************************************************/
        /*  Fonction ajout() :  permet d'ajouter un élément dans la liste chainée sans modifier l'ordre croissant         */
        /*                                                                                                                */
        /******************************************************************************************************************/
        function ajout() {
            let s = null, p = null, nom = "", nouv = {};

            do {							// Saisie du nouveau nom : doit contenir de 2 à 20 lettres
                nom = prompt("nom à ajouter dans la liste ", "Dupont");
            } while (!(/^[a-zèéêëîïùû]{2,20}$/i).test(nom))

            if (nom == null) return;                // Dans le cas ou la personne interrompt la saisie avec la touche Escape

            nom = nom.substring(0, 1).toUpperCase() + nom.substring(1).toLowerCase();
            // Mise en forme du nom saisi: 1ère letre en majuscule et les autres en minuscule

            nouv = new Tpersonne(nom, null);				// création d'un objet contenant le nouveau nom

            if (pDebut == null) pDebut = nouv                            // Insertion dans une liste vide
            else {
                s = pDebut
                while (nom > s.nom && s.pSuivant != null) {
                    p = s;
                    s = s.pSuivant;
                }
                if (nom <= s.nom) {
                    if (s == pDebut) pDebut = nouv              // insertion en début de liste
                    else p.pSuivant = nouv                   // insertion en milieu de liste
                    nouv.pSuivant = s;
                }
                else {
                    s.pSuivant = nouv
                }                           // insertion en fin de liste
            }
            liste();
        }

        /******************************************************************************************************************/
        /*  Fonction suppression() :  permet de supprimer un élément dans la liste chainée                                */
        /*                                                                                                                */
        /******************************************************************************************************************/
        function suppression() {
            let s = null, p = null, nom = "";
            do {
                nom = prompt('Nom à suprimer de la liste');
            } while (!(/^[a-zèéêëîïùû]{2,20}$/i).test(nom))

            if (nom == null) return;

            nom = nom.substring(0, 1).toUpperCase() + nom.substring(1).toLowerCase();
            // Mise en forme du nom saisi: 1ère letre en majuscule et les autres en minuscule

            if (pDebut == null)
                alert('Liste vide !');
            else {
                s = pDebut;
                while (nom > s.nom && s.pSuivant != null) {
                    p = s;
                    s = s.pSuivant;
                }
                if (nom == s.nom) {
                    if (s == pDebut)
                        pDebut = s.pSuivant;
                    else
                        p.pSuivant = s.pSuivant;
                    
                    delete s.nom;
                    delete s.pSuivant;
                }
            }
            liste();
        }

        /******************************************************************************************************************/
        /*  Fonction init() :  permet de réinitialiser la liste                                                           */
        /*                                                                                                                */
        /******************************************************************************************************************/
        function init() {
            let s = pDebut;
            while (s != null) {									// parcours de tous les éléments de la liste
                p = s.pSuivant;								// sauvegarde de l'élément suivant celui que nous allons supprimer
                delete(s.nom);
                delete(s.pSuivant)				// suppression de l'élément pointé
                s = p;											// passage à l'élément suivant
            }
            pDebut = null;
            liste();

        }

    </script>
</head>
<body>
<input id="bouton" type="button" value=" Liste" onclick="liste()">
<input id="bouton" type="button" value=" Ajout" onclick="ajout()">
<input id="bouton" type="button" value=" Suppression" onclick="suppression()">
<input id="bouton" type="button" value=" Réinitialiser la liste" onclick="init()">
<br/><br/><br/><br/>Etat de la liste:<br/><br/>
<div id="resultat"></div>
<body>
</html>